<?php
     $data = array(
          1 => array(
               'name' => 'Мастер и Маргарита',
               'quantity' => 100,
               'price' => 235,
               'image' => '../pictures/Мастер и Маргарита.jpg',
               'pages' => 456,
               'description' => 'Роман Михаила Афанасьевича Булгакова, работа над которым началась в декабре 1928 года и продолжалась вплоть до смерти писателя.',
               'weight' => 120,
               'activity' => 1
          ),
          2 => array(
               'name' => 'Платон',
               'quantity' => 100,
               'price' => 329,
               'image' => '../pictures/Платон.jpg',
               'pages' => 456,
               'description' => 'Сочинения древнегреческого афинского философа Платона в форме диалогов между различными историческими и вымышленными персонажами.',
               'weight' => 120,
               'activity' => 1, 
          ),
          3 => array(
               'name' => 'Собачье сердце',
               'quantity' => 100,
               'price' => 259,
               'image' => '../pictures/Собачье сердце.jpg',
               'pages' => 456,
               'description' => 'Повесть «Собачье сердце» написана в 1925, по сей день считается острым сатирическим и даже крамольным произведением.',
               'weight' => 120,
               'activity' => 1,
          ),
          4 => array(
               'name' => 'Над пропастью во ржи',
               'quantity' => 100,
               'price' => 359,
               'image' => '../pictures/Над пропастью во ржи.jpg',
               'pages' => 456,
               'description' => 'Роман американского писателя Джерома Сэлинджера.',
               'weight' => 120,
               'activity' => 1,
          ),
          5 => array(
               'name' => 'Война и мир',
               'quantity' => 100,
               'price' => 459,
               'image' => '../pictures/Война и мир.jpg',
               'pages' => 456,
               'description' => 'Роман-эпопея Льва Николаевича Толстого, описывающий русское общество в эпоху войн против Наполеона в 1805-1812 годах.',
               'weight' => 120,
               'activity' => 1, 
          ),
          6 => array(
               'name' => 'Мастер и Маргарита',
               'quantity' => 100,
               'price' => 235,
               'image' => '../pictures/Мастер и Маргарита.jpg',
               'pages' => 456,
               'description' => 'Роман Михаила Афанасьевича Булгакова, работа над которым началась в декабре 1928 года и продолжалась вплоть до смерти писателя.',
               'weight' => 120,
               'activity' => 1
          ),
          7 => array(
               'name' => 'Платон',
               'quantity' => 100,
               'price' => 329,
               'image' => '../pictures/Платон.jpg',
               'pages' => 456,
               'description' => 'Сочинения древнегреческого афинского философа Платона в форме диалогов между различными историческими и вымышленными персонажами.',
               'weight' => 120,
               'activity' => 1, 
          ),
          8 => array(
               'name' => 'Собачье сердце',
               'quantity' => 100,
               'price' => 259,
               'image' => '../pictures/Собачье сердце.jpg',
               'pages' => 456,
               'description' => 'Повесть «Собачье сердце» написана в 1925, по сей день считается острым сатирическим и даже крамольным произведением.',
               'weight' => 120,
               'activity' => 1,
          ),
          9 => array(
               'name' => 'Над пропастью во ржи',
               'quantity' => 100,
               'price' => 359,
               'image' => '../pictures/Над пропастью во ржи.jpg',
               'pages' => 456,
               'description' => 'Роман американского писателя Джерома Сэлинджера.',
               'weight' => 120,
               'activity' => 1,
          ),
          10 => array(
               'name' => 'Война и мир',
               'quantity' => 100,
               'price' => 459,
               'image' => '../pictures/Война и мир.jpg',
               'pages' => 456,
               'description' => 'Роман-эпопея Льва Николаевича Толстого, описывающий русское общество в эпоху войн против Наполеона в 1805-1812 годах.',
               'weight' => 120,
               'activity' => 1, 
          ),
          11 => array(
               'name' => 'Мастер и Маргарита',
               'quantity' => 100,
               'price' => 235,
               'image' => '../pictures/Мастер и Маргарита.jpg',
               'pages' => 456,
               'description' => 'Роман Михаила Афанасьевича Булгакова, работа над которым началась в декабре 1928 года и продолжалась вплоть до смерти писателя.',
               'weight' => 120,
               'activity' => 1
          ),
          12 => array(
               'name' => 'Платон',
               'quantity' => 100,
               'price' => 329,
               'image' => '../pictures/Платон.jpg',
               'pages' => 456,
               'description' => 'Сочинения древнегреческого афинского философа Платона в форме диалогов между различными историческими и вымышленными персонажами.',
               'weight' => 120,
               'activity' => 1, 
          ),
          13 => array(
               'name' => 'Собачье сердце',
               'quantity' => 100,
               'price' => 259,
               'image' => '../pictures/Собачье сердце.jpg',
               'pages' => 456,
               'description' => 'Повесть «Собачье сердце» написана в 1925, по сей день считается острым сатирическим и даже крамольным произведением.',
               'weight' => 120,
               'activity' => 1,
          ),
          14 => array(
               'name' => 'Над пропастью во ржи',
               'quantity' => 100,
               'price' => 359,
               'image' => '../pictures/Над пропастью во ржи.jpg',
               'pages' => 456,
               'description' => 'Роман американского писателя Джерома Сэлинджера.',
               'weight' => 120,
               'activity' => 1,
          ),
          15 => array(
               'name' => 'Война и мир',
               'quantity' => 100,
               'price' => 459,
               'image' => '../pictures/Война и мир.jpg',
               'pages' => 456,
               'description' => 'Роман-эпопея Льва Николаевича Толстого, описывающий русское общество в эпоху войн против Наполеона в 1805-1812 годах.',
               'weight' => 120,
               'activity' => 1, 
          ),
          16 => array(
               'name' => 'Мастер и Маргарита',
               'quantity' => 100,
               'price' => 235,
               'image' => '../pictures/Мастер и Маргарита.jpg',
               'pages' => 456,
               'description' => 'Роман Михаила Афанасьевича Булгакова, работа над которым началась в декабре 1928 года и продолжалась вплоть до смерти писателя.',
               'weight' => 120,
               'activity' => 1
          ),
          17 => array(
               'name' => 'Платон',
               'quantity' => 100,
               'price' => 329,
               'image' => '../pictures/Платон.jpg',
               'pages' => 456,
               'description' => 'Сочинения древнегреческого афинского философа Платона в форме диалогов между различными историческими и вымышленными персонажами.',
               'weight' => 120,
               'activity' => 1, 
          ),
          18 => array(
               'name' => 'Собачье сердце',
               'quantity' => 100,
               'price' => 259,
               'image' => '../pictures/Собачье сердце.jpg',
               'pages' => 456,
               'description' => 'Повесть «Собачье сердце» написана в 1925, по сей день считается острым сатирическим и даже крамольным произведением.',
               'weight' => 120,
               'activity' => 1,
          ),
          19 => array(
               'name' => 'Над пропастью во ржи',
               'quantity' => 100,
               'price' => 359,
               'image' => '../pictures/Над пропастью во ржи.jpg',
               'pages' => 456,
               'description' => 'Роман американского писателя Джерома Сэлинджера.',
               'weight' => 120,
               'activity' => 1,
          ),
          20 => array(
               'name' => 'Война и мир',
               'quantity' => 100,
               'price' => 459,
               'image' => '../pictures/Война и мир.jpg',
               'pages' => 456,
               'description' => 'Роман-эпопея Льва Николаевича Толстого, описывающий русское общество в эпоху войн против Наполеона в 1805-1812 годах.',
               'weight' => 120,
               'activity' => 1, 
          )
     );

     if(isset($_GET['getdata'])){
          echo json_encode($data);
     }

     function replace_data($new_data){
          if(count($new_data) == 0){
               print_r("Массив пустой");
               return 0;
          }

          $new_data_key = array_keys($new_data);
          $keys_replace_array = array_keys($new_data[$new_data_key[0]]);

          // Замена значений у data
          for($i=0; $i<count($keys_replace_array);$i++){
               $GLOBALS['data'][$new_data_key[0]][$keys_replace_array[$i]] = $new_data[$new_data_key[0]][$keys_replace_array[$i]];
          }

          print_r($GLOBALS['data']);
     }

    // print_r($_POST);

     // Условие возвращает $data     
     // if(isset($_POST["adminData"])){
     //      echo json_encode($data);
     // }
     
     /*
     Условие срабатывает если на сервер приходит новые данные. 
     Код ниже должен менять старые данные на новые.
     */
     if(isset($_POST["newData"])){
          $new_data = json_decode($_POST["newData"], true);
          replace_data($new_data);
     }

     /*Условие срабатывает, если приходит запрос на удаление данных $data*/
     if(isset($_POST["deleteData"])){
          $delete_data = json_decode($_POST["deleteData"], true);
          unset($GLOBALS['data'][$delete_data]);
          
          print_r($GLOBALS['data']);
     }

     if(isset($_POST["IMG"])){
          print_r($_POST["IMG"]);
     }
?>